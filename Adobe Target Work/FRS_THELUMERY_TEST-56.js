<style>
  .LOR60B caas-header {
      border-bottom: solid 2px rgba(195, 195, 195, 0.5);
  }
  .LOR60B #mainArticle {
      width: 100%;
      max-width: 980px;
      margin: 0 auto;
      background: none;
      padding: 20px 0 0;
  }
  .LOR60B #mainArticle #articleTitle {
      z-index: 1;
      position: relative;
      width: 100%;
      max-width: 680px;
  }
  .LOR60B #mainArticle #articleTitle #innerWrapper {
      margin: 0px 0px 20px;
      padding: 0px;
  }
  .LOR60B #mainArticle #articleTitle h2#articleTitleText {
      color: #232323;
      font-family: "Roboto Condensed Bold", "Arial", "Helvetica", "sans-serif";
      font-size: 2em;
      margin: 0;
  }
  .LOR60B #mainArticle #articleDescription {
      font-family: Georgia, serif;
      font-size: 1.3em;
      color: #232323;
      line-height: 1.3em;
      margin: 0 15px;
      padding: 0 15px;
      max-width: 620px;
  }
  .LOR60B #mainArticle #articleImage {
      width: 100%;
      max-width: 680px;
      height: auto;
  }
  .LOR60B #masterOffer {
      background-color: #2C3139;
      color: #fff;
      -webkit-box-shadow: 0px 0px 10px 12px rgba(195,195,195,0.5);
      -moz-box-shadow: 0px 0px 10px 12px rgba(195,195,195,0.5);
      box-shadow: 0px 0px 10px 12px rgba(195,195,195,0.5);
      margin-top: 30px;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-breach-message-container {
      padding: 25px;
      text-align: center;
      text-transform: uppercase;
      font-family: "Roboto Condensed Bold", "Arial", "Helvetica", "sans-serif";
  }
  .LOR60B #masterOffer .hero-offer-content .hero-breach-message-container h2 {
      font-size: 34px;
      margin: 0;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-breach-message-container h2 span {
      font-size: 18px;
      padding-top: 8px;
      font-family: "Roboto", "Helvetica", "Arial", "Helvetica", "sans-serif";
      display: block;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container {
      max-width: 980px;
      margin: 0 auto;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-features-item-details ul li {
      display: inline-block;
      max-width: 200px;
      margin-left: 40px;
      vertical-align: top;
      position: relative;
      font-family: "Roboto", "Helvetica", "Arial", "Helvetica", "sans-serif";
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-features-item-details ul li:before {
      content: "\2713";
      position: absolute;
      left: -17px;;
      top: 0;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-features-item-details ul li p {
      margin: 0;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-features-content {
      border-top: solid 2px #41454C;
      border-bottom: solid 2px #41454C;
      margin-bottom: 20px;
      font-size: 15px;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-features-content .hero-offer-features-item-details {
      margin: 0 auto;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-button-container {
      text-align: center;
      padding: 0 0 30px 0;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-anchor {
      width: 30px;
      height: 24px;
      content: " ";
      background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAiCAMAAAA9FerRAAAABGdBTUEAALGPC/xhBQAAACBjSFJN AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1FBMVEUAAACAgL9mcIFmboBt kpJmcoFlb4BrcoZmcIFlb4GAgJ9nboFmboBlboBqcYdmboFmboBlcYNmb4Fmb4FmdYNmboFlb4Fx cY5mcYNlboBmb4FpcYdlb4Bmb4FncYNmboFlb4Bmb4Flb4BmgJlnboNmcIGAgKplb4BmboFob4Nl cIFmboFlb4B0dItncYFob4FlboFmboFncYFmboFnb4FmmZlmb4BlboFqgJVoboFlb4Fmb4Blb4Fm b4BocINmb4Flb4F2dolmb4Flb4FocINlboBmboBnb4Fnb4RlboBmb4FtgJJncIFlboFmboBpcYJm b4FlboBocIFlb4FocIKqqqpmb4Bmb4Fmd4hlcIFmb4BmboBncIJmb4Bmb4FwcI9mboFpcoRlboFm b4BnboFmb4FocYSAgP9mboFlboFpeIdmcIJlboFlb4Blb4Jlb4Bmb4BnboJmboFpboJmcIFmboFx cY5nboJlb4BocoJmb4Flb4BreYZlb4JmboFqcIX///9mboBmboFmb4Jmb4BncoJmboBlboBlboFm cYJlb4Fmb4BoboVmb4Flb4Fnc4Zlb4BmboBqcINnb4Bmb4Fmc4Zmb4BlboFnboNncIFlboD////Y BnDKAAAAmnRSTlMABIK3B0HbJoC4CEP15SR/uUT25CN9uglG9+IitbxI+Pm0vQpKSwazvkxJsr8L TUewwE/6RQWvwgxRrsNT+0KsxA1V9ECrxVc+qcYOWfzzPajHW/I7A6fID1398TmlyhBfOKTLYfA2 AqLMEWT+7zWhzWbuM6DOEmjtMZ7PE2rsMAGd0GzrL5vj6i2a6SyY6CqX5ymV5iiTkiWQpTNBUwAA AAFiS0dEgGW9nmgAAAAHdElNRQfjBhgGDgtLNcHoAAABqklEQVQ4y6XV51MTURQF8LsUQQJRIj0Q UCBKl14EAQtdkBKU3pTQexEIRXovggj71/qSPWEWsrvZDedL3jv3/nYmyUxC9JhwHq57eftocb5P /ISDP88/DVDvdIF8kN5+eMazPFctgw1s/UUIUSjvSFi4OhcR6ViPMlK0APkYVdIUK2zHmcjnJeSr ePcuAS42kV3MryHfuJVJcXDJjqs5BTI1Tdmlw0VmoDC/hcxUlFnZwpYh567KzYPML5B3hU6nE5W5 RZDvZGVxibAR+P5ezZVClpVLuw9wHz89GHCfISskZaXTVbmMuGrImlpXV/dFmNU3SDyU+wrZ6CKb 4JpbJN+GpRXy2/f7g7Z2oe/olPngLF2Q3T3iutfp+mS/Kks/5IBI/oD7OUjysQ5BDo84q9ExoRmf IKVYJyGnIKfhZmZJOdY5yPkF+3UR7tcSuYt1GXLFRrQKt7bu1hFt/IbctG3htL2jwjG5i/09vO4f qHJMHvLiHB2rdEyeiNzpmWrH5Pmdu/ijwTF5CXf1V5NjuXa4ID+tjuif/af+RrsjuuX39J449rdi VBj+B6U0ArvqmBSnAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA2LTI0VDA2OjE0OjExKzAzOjAw WSvO/wAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wNi0yNFQwNjoxNDoxMSswMzowMCh2dkMAAAAA SUVORK5CYII=");
      display: block;
      background-repeat: no-repeat;
      background-size: 30px;
      text-align: center;
      margin: 0 auto;
      padding-bottom: 20px;
      cursor: pointer;
      justify-content: center;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-button-container button {
      min-width: 160px;
      background: transparent;
      font-family: "Roboto", "Helvetica", "Arial", "Helvetica", "sans-serif";
      font-size: 16px;
      font-weight: normal;
      color: #ffffff;
      cursor: pointer;
      border-radius: 40px;
      margin: 0;
      padding: 10px;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-button-container button:first-child {
      margin-right: 10px;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-button-container button:last-child {
      margin-left: 10px;
  }
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-button-container button.subscribe {
      border: none;
      background-color: #E33995;   
  }
  .LOR60B #fullDigital,
  .LOR60B #fullDigital h3,
  .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-features-item-details ul {
      display: inline-block;
  }
  .LOR60B #fullDigital h3 {
      font-family: "Roboto Condensed Bold", "Arial", "Helvetica", "sans-serif";
      font-weight: 400;
      text-transform: uppercase;
      color: #18ADF0;
      margin: 0;
  }
  .LOR60B #fullDigital img.hero-offer-device-image {
      width: 40px;
      margin-right: 15px;
      margin-top: 0;
      vertical-align: middle;
  }
  .LOR60B #loginButton {
      display: inline-block;
      margin-left: 10px;
  }
  .LOR60B #loginButton .caas-login-button-0 .login {
      border: solid 2px #fff;
      text-decoration: none;
      font-size: 1em;
      background: transparent;
  }
  .LOR60B .hero-offer-content .hero-offer-features-item.hero-offer-features-item-details .premium {
      position: relative;
      margin-left: 15px;
  }
  .LOR60B .hero-offer-content .hero-offer-features-item.hero-offer-features-item-details .premium:before {
      content: " ";
      position: absolute;
      top: 0;
      left: -15px;
      width: 14px;
      height: 14px;
      background: transparent url(https://subscriptions.news.com.au/latest/a/common/images/icon-premium.png) no-repeat top right;
      background-size: contain;
  }
  .LOR60B .hide {
      display: none;
  }
  /***************************/
  @media (min-width:768px) and (max-width: 980px) {
      .LOR60B #mainArticle {
          padding: 0 15px;
      }
      .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container {
          padding: 0 15px;
      }
  }
  /***** custom******/
  @media (min-width: 768px){
      .LOR60B .caas-hero-offer-0 .hero-offer-container {
          padding: 24px 10px 30px;
      }
      .LOR60B .caas-hero-offer-0 .article .hero-breach-message-container {
          padding-bottom: 18px;
      }
      .LOR60B .caas-hero-offer-0 .article .hero-breach-message-container h2 {
          text-align: center;
          font-size: 16px;
      }
      .LOR60B .caas-hero-offer-0 .hero-offer-content .hero-offer-features-item.hero-offer-features-item-image {
          width: 44%;
      }
      .LOR60B .caas-hero-offer-0 .hero-offer-content .hero-offer-features-item .hero-offer-device-image {
          width: 100%;
      }
      .LOR60B .caas-hero-offer-0 .hero-offer-content .hero-offer-features-item.hero-offer-features-item-details {
          margin-left: 10px;
      }
      .LOR60B .caas-hero-offer-details-0 .hero-offer-features-item ul li {
          font-size: 14px;
          color: #fff;
      }
      .LOR60B .caas-hero-offer-details-0 .hero-offer-features-item ul li p {
          font-size: 14px;
      }  
  }
  
  .LOR60B .caas-hero-offer-0 .hero-offer-article-preview-container.large-device {
      display: none;
  }
  .LOR60B .caas-hero-offer-0 .hero-offer-content .hero-button-container {
      overflow: hidden;
      display: -webkit-box;
      display: -moz-box;
      display: -ms-flexbox;
      display: -webkit-flex;
      display: flex;
      flex-direction: row-reverse;
      margin: 0 auto;
  }
  .LOR60B .caas-hero-offer-details-0 .hero-button-container .button {
      letter-spacing: 0.1rem;
      outline: none;
      border-radius: 0;
      text-transform: capitalize;
      font-size: 15px;
      padding: 11px 27px;
  }
  .LOR60B .caas-hero-offer-details-0 .hero-button-container .login {
      margin-right: 14px;
      background: #237d9b;
      line-height: 1;
      outline: none;
      border-radius: 0;
      text-transform: capitalize;
      font-size: 15px;
      padding: 11px 27px;
      min-width: 126px;
      border: 0;
      color: #fff;
  }
  .LOR60B .caas-hero-offer-details-0 .hero-button-container .button.subscribe {
      background: #f15b46;
      line-height: 1;
      outline: none;
  }
  .LOR60B .caas-hero-offer-details-0 .hero-button-container .button.other {
      display: none;
  }
  .LOR60B .caas-hero-offer-details-0 .hero-offer-title {
      color: #fff;
  }
  .LOR60B .caas-hero-offer-details-0 .hero-offer-conditions {
      color: #fff;
  }
  .LOR60B .caas-hero-offer-details-0 .hero-offer-details {
      background: transparent;
      border: 1px solid red;
  }
  .LOR60B .caas-breach-message-0 .breach-container h2 span {
      display: none;
  }
/******end-custom******/
  @media (max-width: 767px) {
      .LOR60B caas-header {
          border-bottom: none;
      }
      .LOR60B #mainArticle {
          padding: 0;
      }
      .LOR60B #mainArticle #articleTitle h2#articleTitleText {
          font-size: 25px;
      }
      .LOR60B #mainArticle #articleTitle h2#articleTitleText,
      .LOR60B #mainArticle #articleDescription,
      .LOR60B #mainArticle #articleImage {
          max-width: none;
      }
      .LOR60B caas-offers {
          display: none;
      }
      .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-button-container {
          padding: 0 0 10px 0;
      }
      .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-features-item-details ul,
      .LOR60B #masterOffer #fullDigital {
          width: 50%;
          display: table-cell;
      }
      .LOR60B #masterOffer #fullDigital {
          text-align: center;
      }
      .LOR60B #masterOffer #fullDigital h3 {
          font-size: 20px;
      }
      .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-features-item-details ul {
          padding-left: 0;
      }
      .LOR60B #masterOffer .hero-offer-content .hero-offer-features-content {
          border: none;
          padding: 0 15px;
          font-size: 12px;
      }
      .LOR60B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-features-item-details ul li {
          margin-left: 20px;
      }
      .LOR60B #fullDigital img.hero-offer-device-image {
          width: 80px;
          margin: 0 0 10px 0;
          vertical-align: top;
      }
    
  }
  
</style>

<script>	
  ((window, document) => {
      const searchParams = new URLSearchParams(window.location.search);
      const TCOGURL = 'https://a.tcog.news.com.au/component/article/story-preview-';
      //const TCOGURL = 'https://a.uat.tcog.news.com.au/component/article/story-preview-';
      const TCOGPARAM = '?esi=true&t_product=consumer-commerce&t_output=json';

      function newV21() {
          if (!searchParams.get('v21suffix')) {
              searchParams.set('v21suffix', 'frs-b');
              window.location.replace(window.location.origin + window.location.pathname + '?' + searchParams.toString());
          }
      }

      newV21();

      /*
      * adds body class
      */
      function addBodyClass() {
        document.body.classList.add('LOR60B');
      }

      /*
      * @param needle
      * @param haystack
      * @param callback
      */
      function waitForElement(needle, haystack, callback) {
          const targetNode = document.querySelectorAll(haystack)[0];
          const config = { childList: true, subtree: true };

          const observerCallback = (mutationsList, observer) => {
            for (const mutation of mutationsList) {
              if (mutation.type === 'childList' && document.querySelectorAll(needle).length > 0) {
                observer.disconnect();
                callback();
                break;
              }
            }
          };

          const observer = new MutationObserver(observerCallback);

          observer.observe(targetNode, config);
      }

      /*
      * @return articleId (string)
      */
      function getArticleId() {
        const dest = searchParams.get('dest');

        if (dest) {
          const articleUrl = new URL(dest);
          const articleId = articleUrl.pathname.split('/').pop();
          return articleId;
        }

        return 0;
      }

      /*
      * @parameter articleId (string)
      * @return requestUrl (string)
      */
      function buildTcogUrl(articleId) {
        let requestUrl = null;

        if (articleId) {
          requestUrl = encodeURI(TCOGURL + articleId + TCOGPARAM);
        }

        return requestUrl;
      }

      /**
       * click addEventListener for the anchor to form section
       */
      function anchorListener() {
          let formSection = document.querySelector('caas-selection-subscription-form');
          let anchorBtn = document.querySelector('.hero-offer-anchor');
          let anchorRect = formSection.getBoundingClientRect();

          anchorBtn.addEventListener('click', () => {
              formSection.scrollIntoView({
                behavior: 'smooth'
              });
          });
      }

      /*
      * function to create element without document
      * @parameter element (string)
      * @return Node
      */
      function createNode(element) {
        return document.createElement(element);
      }

      /*
      * @parameter (string)
      * @return
      */
      function strip(html) {
        const tmp = document.createElement('DIV');
        tmp.innerHTML = html;
        return tmp.textContent || tmp.innerText || '';
      }

      /*
      * Sets exiting content to display none
      */
      function hideOldContent() {
        document.querySelector('caas-hero-offer').classList.add('hide');
      }

      /*
      * change the master offer
      */
      function changeMasterOffer() {
        const masthead = window.location.hostname;
        const container = document.querySelector('#mainArticle');
        const offerContainer = document.getElementById('masterOffer');

        if (!offerContainer && masthead) {
          const html = `<div class="hero-offer-content">
                            <div class="hero-breach-message-container">
                                <h2 class="caas-breach-message-base">There's more to this story <span>But it's a member-only story. Subscribe today to unlock it and more...</span></h2>
                            </div>
                            <div class="hero-offer-details-container">
                                <div class="hero-offer-details">
                                    <div class="hero-offer-features-content">
                                        <div class="hero-offer-features-item hero-offer-features-item-details">
                                            <div id="fullDigital">
                                                <img class="hero-offer-device-image" src="https://myaccount.news.com.au/bizopsimages/offersets/images/heraldsun/pack-digital.png">
                                                <h3>Full Digital Access</h3>
                                            </div>
                                            <ul>
                                                <li><p>Unlimited access to <span class="domain-url"></span> on desktop, tablet and mobile</p></li>
                                                <li><p>Full access across our News+ Network, SuperCoach Stats and more</p></li>
                                                <li><p>Exclusive <span class="premium">Rewards</span>^</p></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="hero-button-container"></div>
                                <div class="hero-offer-anchor"></div>
                            </div>
                        </div>`;

          const masterOffer = createNode('DIV');
          //masterOffer.id = 'masterOffer';
          //masterOffer.innerHTML = html;
          //container.after(masterOffer);
      const btnSecton = document.querySelector('.caas-hero-offer-0 .hero-offer-content .hero-offer-features-item .hero-button-container');
      const offer = document.querySelector('.caas-hero-offer-0 .hero-offer-content .hero-offer-features-content');
      offer.appendChild(btnSecton);

          const subscribeBtn = document.querySelector('button.subscribe');
          const loginBtn = document.querySelector('.hero-offer-links button.login');
          const btnContainer = document.querySelector('.hero-button-container');
          if (subscribeBtn) btnContainer.prepend(subscribeBtn);
          if (loginBtn) {
            loginBtn.textContent = 'Log in';
            btnContainer.append(loginBtn);
          }

          //const masterContent = document.querySelector('.LOR56B #masterOffer .hero-offer-content .hero-offer-details-container .hero-offer-features-item-details ul li p .domain-url');
          masterContent.innerText = masthead.toString();
        }
      }
      
      /*
      * Change the main article data
      * @param data
      */
      function changeArticleData(data) {
        const articleTitleText = data.subtitle;
        const articleDescription = strip(data.subscriptionSummary);
        const header = document.querySelector('caas-header');

        if (header && !document.getElementById('mainArticle') && articleTitleText && articleDescription) {
            const mainArticle = createNode('DIV');
            mainArticle.id = 'mainArticle';
            header.after(mainArticle);

            const articleContent = document.getElementById('mainArticle');

            if (typeof articleContent !== 'undefined') {
                const articleHTML = `<div id='articleTitle'>
                                    <div id='innerWrapper'>
                                        <h2 id='articleTitleText'></h2>
                                    </div>
                                </div>
                                <div id='articleImageHolder'></div>
                                <p id='articleDescription'></p>`;
                                
                articleContent.innerHTML = articleHTML;
            }

            if (document.getElementById('articleImageHolder')) {
                const articleImage = createNode('IMG');
                articleImage.id = 'articleImage';

                const articleImageHolder = document.getElementById('articleImageHolder');
                const articleTitle = document.getElementById('articleTitleText');
                const articleDesc = document.getElementById('articleDescription');

                articleImageHolder.append(articleImage);
                articleTitle.textContent = articleTitleText;
                articleDesc.textContent = articleDescription;

                const image = document.getElementById('articleImage');

                if (data.related.length >= 3 && data.related[2].link && typeof image !== 'undefined') {
                    image.src = data.related[2].link;
                }

                changeMasterOffer(); // as article correctly added we can change the offer
            }
          }
        }

      /*
      * @parameter articleId (string)
      * @return response (json)
      */
      function requestArticle(articleId) {
          const requestUrl = buildTcogUrl(articleId);

          if (requestUrl) {
              fetch(requestUrl)
                .then((response) => {
                    // wait for tcog response before we make changes
                    return response.json();
                })
                .then((article) => {
                    waitForElement('caas-subscription-form-template', 'caas-offers', () => {
                        addBodyClass();
                        changeArticleData(article.data);
                        hideOldContent();
                        anchorListener();
                    });
                })
                .catch((error) => {
                    console.log(error);
                });
          }
      }

      /*
      * init function
      */
      function init() {
          const articleId = getArticleId();

          if (articleId) {
              requestArticle(articleId);
          }
      }

      waitForElement('caas-subscription-form-template', 'caas-subscription-form', () => {
          waitForElement('caas-header', 'caas-subscription-form-template', () => {
              init();
          });
      });
    })(window, document);
</script>